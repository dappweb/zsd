"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[34947],{73853:function(t,e,r){r.d(e,{D:function(){return m},F:function(){return u},I:function(){return c},a:function(){return l},b:function(){return d},c:function(){return h},f:function(){return p},g:function(){return g},u:function(){return f}});var n=r(15418),a=r(46347),o=r(61501),i=r(8400),s=r(23663).Buffer;let c=a.arrayify("0x80ac58cd"),l=a.arrayify("0xd9b67a26"),u={name:"Failed to load NFT metadata"};async function p(t,e,r){let i;if(e.startsWith("data:application/json;base64")&&void 0!==s){let r=e.split(",")[1],a=JSON.parse(s.from(r,"base64").toString("utf-8"));return n.a.parse({...a,id:o.O$.from(t).toString(),uri:e})}let c=e.replace("{id}",a.hexZeroPad(o.O$.from(t).toHexString(),32).slice(2));try{i=await r.downloadJSON(c)}catch(a){let n=e.replace("{id}",o.O$.from(t).toString());try{i=await r.downloadJSON(n)}catch(r){console.warn("failed to get token metadata: ".concat(JSON.stringify({tokenId:t.toString(),tokenUri:e})," -- falling back to default metadata")),i=u}}return n.a.parse({...i,id:o.O$.from(t).toString(),uri:e})}async function h(t,e,a,s){let h;let d=(await r.e(31787).then(r.t.bind(r,31787,19))).default,f=new i.CH(t,d,e),[g,m]=await Promise.all([f.supportsInterface(c),f.supportsInterface(l)]);if(g){let n=(await Promise.resolve().then(r.t.bind(r,19115,19))).default,o=new i.CH(t,n,e);h=await o.tokenURI(a)}else if(m){let n=(await Promise.resolve().then(r.t.bind(r,31617,19))).default,o=new i.CH(t,n,e);h=await o.uri(a)}else throw Error("Contract must implement ERC 1155 or ERC 721.");return h?p(a,h,s):n.a.parse({...u,id:o.O$.from(a).toString(),uri:""})}async function d(t,e){return"string"==typeof t?t:await e.upload(n.C.parse(t))}async function f(t,e,r,a){if(void 0===t.find(t=>"string"!=typeof t))return t;if(void 0===t.find(t=>"object"!=typeof t))return await e.uploadBatch(t.map(t=>n.C.parse(t)),{rewriteFileNames:{fileStartNumber:r||0},onProgress:null==a?void 0:a.onProgress});throw Error("NFT metadatas must all be of the same type (all URI or all NFTMetadataInput)")}function g(t){let e=t[0].substring(0,t[0].lastIndexOf("/"));for(let r=0;r<t.length;r++){let n=t[r].substring(0,t[r].lastIndexOf("/"));if(e!==n)throw Error("Can only create batches with the same base URI for every entry in the batch. Expected '".concat(e,"' but got '").concat(n,"'"))}return e.replace(/\/$/,"")+"/"}let m=100},11454:function(t,e,r){r.d(e,{E:function(){return c},R:function(){return i},S:function(){return s},a:function(){return l}});var n=r(61501),a=r(30248),o=r(89586);let i=a.z.union([a.z.date().transform(t=>n.O$.from(Math.floor(t.getTime()/1e3))),a.z.number().transform(t=>n.O$.from(t))]),s=i.default(new Date(0)),c=i.default(new Date(Date.now()+31536e7));function l(t,e){if(!t)throw new o.x(e);return t}},21096:function(t,e,r){r.d(e,{C:function(){return n}});class n{overrideNextTransaction(t){this.contractWrapper.withTransactionOverride(t)}constructor(t){this.contractWrapper=t}}},13957:function(t,e,r){r.d(e,{C:function(){return c}});var n=r(45094),a=r(89586),o=r(13545),i=r(21325),s=r(12158);class c{async getAll(){(0,n.Z)(this.roles.length,"this contract has no support for roles");let t={},e=Object.entries(this.roles);return(await Promise.all(e.map(t=>{let[,e]=t;return this.get(e)}))).forEach((r,n)=>t[e[n][1]]=r),t}async get(t){(0,n.Z)(this.roles.includes(t),'this contract does not support the "'.concat(t,'" role'));let e=this.contractWrapper;if((0,o.h)("getRoleMemberCount",e)&&(0,o.h)("getRoleMember",e)){let r=(0,a.H)(t),n=(await e.read("getRoleMemberCount",[r])).toNumber();return await Promise.all(Array.from(Array(n).keys()).map(t=>e.read("getRoleMember",[r,t])))}throw Error("Contract does not support enumerating roles. Please implement IPermissionsEnumerable to unlock this functionality.")}async verify(t,e){await Promise.all(t.map(async t=>{let[r,n]=await Promise.all([this.get(t),(0,a.aL)(e)]);if(!r.map(t=>t.toLowerCase()).includes(n.toLowerCase()))throw new a.o(n,t)}))}async getRevokeRoleFunctionName(t){let[e,r]=await Promise.all([(0,a.aL)(t),this.contractWrapper.getSignerAddress()]);return r.toLowerCase()===e.toLowerCase()?"renounceRole":"revokeRole"}constructor(t,e){this.featureName=a.d4.name,this.setAll=(0,i.f)(async(t,e)=>{let r=e||await this.contractWrapper.getSignerAddress(),o=new s.C(this.contractWrapper),c=Object.keys(t);(0,n.Z)(c.length,"you must provide at least one role to set"),(0,n.Z)(c.every(t=>this.roles.includes(t)),"this contract does not support the given role");let l=await this.getAll(),u=[],p=c.sort(t=>"admin"===t?1:-1);for(let e=0;e<p.length;e++){var h,d;let n=p[e],[i,s]=await Promise.all([Promise.all((null===(h=t[n])||void 0===h?void 0:h.map(t=>(0,a.aL)(t)))||[]),Promise.all((null===(d=l[n])||void 0===d?void 0:d.map(t=>(0,a.aL)(t)))||[])]),c=i.filter(t=>!s.includes(t)),f=s.filter(t=>!i.includes(t));if(f.length>1){let t=f.indexOf(r);t>-1&&(f.splice(t,1),f.push(r))}c.length&&c.forEach(t=>{u.push(o.encode("grantRole",[(0,a.H)(n),t]))}),f.length&&(await Promise.all(f.map(t=>this.getRevokeRoleFunctionName(t)))).forEach((t,e)=>u.push(o.encode(t,[(0,a.H)(n),f[e]])))}return i.T.fromContractWrapper({contractWrapper:this.contractWrapper,method:"multicall",args:[u]})}),this.grant=(0,i.f)(async(t,e)=>{(0,n.Z)(this.roles.includes(t),'this contract does not support the "'.concat(t,'" role'));let r=await (0,a.aL)(e);return i.T.fromContractWrapper({contractWrapper:this.contractWrapper,method:"grantRole",args:[(0,a.H)(t),r]})}),this.revoke=(0,i.f)(async(t,e)=>{(0,n.Z)(this.roles.includes(t),'this contract does not support the "'.concat(t,'" role'));let r=await (0,a.aL)(e),o=await this.getRevokeRoleFunctionName(r);return i.T.fromContractWrapper({contractWrapper:this.contractWrapper,method:o,args:[(0,a.H)(t),r]})}),this.contractWrapper=t,this.roles=e}}},33260:function(t,e,r){r.r(e),r.d(e,{MarketplaceV3:function(){return h}});var n=r(11454),a=r(13545),o=r(89586),i=r(12158),s=r(21096),c=r(33270),l=r(13957),u=r(34795),p=r(21325);r(12016),r(98430),r(32942);class h{get directListings(){return(0,n.a)(this.detectDirectListings(),o.dA)}get englishAuctions(){return(0,n.a)(this.detectEnglishAuctions(),o.dB)}get offers(){return(0,n.a)(this.detectOffers(),o.dC)}get chainId(){return this._chainId}onNetworkUpdated(t){this.contractWrapper.updateSignerOrProvider(t)}getAddress(){return this.contractWrapper.address}async prepare(t,e,r){return p.T.fromContractWrapper({contractWrapper:this.contractWrapper,method:t,args:e,overrides:r})}async call(t,e,r){return this.contractWrapper.call(t,e,r)}detectDirectListings(){if((0,a.d)(this.contractWrapper,"DirectListings"))return new u.M(this.contractWrapper,this.storage)}detectEnglishAuctions(){if((0,a.d)(this.contractWrapper,"EnglishAuctions"))return new u.a(this.contractWrapper,this.storage)}detectOffers(){if((0,a.d)(this.contractWrapper,"Offers"))return new u.b(this.contractWrapper,this.storage)}constructor(t,e,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},u=arguments.length>4?arguments[4]:void 0,p=arguments.length>5?arguments[5]:void 0,d=arguments.length>6&&void 0!==arguments[6]?arguments[6]:new o.cs(t,e,u,n,r);this._chainId=p,this.abi=o.bj.parse(u||[]),this.contractWrapper=d,this.storage=r,this.metadata=new a.C(this.contractWrapper,o.b$,this.storage),this.app=new a.b(this.contractWrapper,this.metadata,this.storage),this.roles=new l.C(this.contractWrapper,h.contractRoles),this.encoder=new i.C(this.contractWrapper),this.estimator=new a.G(this.contractWrapper),this.events=new a.a(this.contractWrapper),this.platformFees=new c.C(this.contractWrapper),this.interceptor=new s.C(this.contractWrapper)}}h.contractRoles=o.dH},15418:function(t,e,r){r.d(e,{B:function(){return c},C:function(){return l},N:function(){return u},a:function(){return p},s:function(){return h}});var n=r(89586),a=r(30248),o=r(12158);let i=a.z.object({}).catchall(a.z.union([n.cx,a.z.unknown()])),s=a.z.union([a.z.array(a.z.array(i)).transform(t=>t.flat()),a.z.array(i),i]).optional().nullable(),c=a.z.object({name:a.z.union([a.z.string(),a.z.number()]).optional().nullable(),description:a.z.string().nullable().optional().nullable(),image:n.cy.nullable().optional(),animation_url:n.cy.optional().nullable()}),l=c.extend({external_url:n.cy.nullable().optional(),background_color:n.cz.optional().nullable(),properties:s,attributes:s}).catchall(a.z.union([n.cx,a.z.unknown()])),u=a.z.union([l,a.z.string()]),p=l.extend({id:a.z.string(),uri:a.z.string(),image:a.z.string().nullable().optional(),external_url:a.z.string().nullable().optional(),animation_url:a.z.string().nullable().optional()});async function h(t,e,a,i){if((0,o.i)(a))i.value=e;else{let o=(await Promise.resolve().then(r.t.bind(r,54497,19))).default,s=t.getSigner(),c=t.getProvider(),l=new n.cs(s||c,a,o,t.options,t.storage),u=await t.getSignerAddress(),p=t.address;return(await l.read("allowance",[u,p])).lt(e)&&await l.sendTransaction("approve",[p,e]),i}}}}]);